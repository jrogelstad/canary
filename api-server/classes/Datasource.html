<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Datasource - Featherbone Server</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="..\..\featherbone-server.png" title="Featherbone Server"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Client.html">Client</a></li>
                                <li><a href="../classes/Connection.html">Connection</a></li>
                                <li><a href="../classes/Database.html">Database</a></li>
                                <li><a href="../classes/Datasource.html">Datasource</a></li>
                                <li><a href="../classes/f.html">f</a></li>
                                <li><a href="../classes/Money.html">Money</a></li>
                                <li><a href="../classes/Services.API.html">Services.API</a></li>
                                <li><a href="../classes/Services.CRUD.html">Services.CRUD</a></li>
                                <li><a href="../classes/Services.Currency.html">Services.Currency</a></li>
                                <li><a href="../classes/Services.Events.html">Services.Events</a></li>
                                <li><a href="../classes/Services.Exporter.html">Services.Exporter</a></li>
                                <li><a href="../classes/Services.Feathers.html">Services.Feathers</a></li>
                                <li><a href="../classes/Services.Importer.html">Services.Importer</a></li>
                                <li><a href="../classes/Services.Installer.html">Services.Installer</a></li>
                                <li><a href="../classes/Services.Packager.html">Services.Packager</a></li>
                                <li><a href="../classes/Services.Profile.html">Services.Profile</a></li>
                                <li><a href="../classes/Services.Role.html">Services.Role</a></li>
                                <li><a href="../classes/Services.Routes.html">Services.Routes</a></li>
                                <li><a href="../classes/Services.Services.html">Services.Services</a></li>
                                <li><a href="../classes/Services.Settings.html">Services.Settings</a></li>
                                <li><a href="../classes/Services.Tools.html">Services.Tools</a></li>
                                <li><a href="../classes/Services.Workbooks.html">Services.Workbooks</a></li>
                                <li><a href="../classes/String.html">String</a></li>
                                <li><a href="../classes/User.html">User</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/API.html">API</a></li>
                                <li><a href="../modules/CRUD.html">CRUD</a></li>
                                <li><a href="../modules/Currency.html">Currency</a></li>
                                <li><a href="../modules/Database.html">Database</a></li>
                                <li><a href="../modules/Datasource.html">Datasource</a></li>
                                <li><a href="../modules/Events.html">Events</a></li>
                                <li><a href="../modules/Feathers.html">Feathers</a></li>
                                <li><a href="../modules/Installer.html">Installer</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/Packager.html">Packager</a></li>
                                <li><a href="../modules/Profile.html">Profile</a></li>
                                <li><a href="../modules/Role.html">Role</a></li>
                                <li><a href="../modules/Routes.html">Routes</a></li>
                                <li><a href="../modules/Settings.html">Settings</a></li>
                                <li><a href="../modules/Tools.html">Tools</a></li>
                                <li><a href="../modules/Workbooks.html">Workbooks</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>Datasource Class</h1>
<div class="box meta">


        <div class="foundat">
            Defined in: <a href="../files/datasource.js.html#l65"><code>datasource.js:65</code></a>
        </div>

            Module: <a href="../modules/Datasource.html">Datasource</a>

</div>


<div class="box intro">
    <p>Server datasource class.</p>

</div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
            <li class="api-class-tab properties"><a href="#properties">Properties</a></li>
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                            <li class="index-item method">
                                <a href="#method_authenticate">authenticate</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_deserializeUser">deserializeUser</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_export">export</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_getCatalog">getCatalog</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_getPool">getPool</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_getRoutes">getRoutes</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_getServices">getServices</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_import">import</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_install">install</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_listen">listen</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_lock">lock</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_package">package</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_registeredFunctions">registeredFunctions</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_registerFunction">registerFunction</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_registerFunction">registerFunction</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_request">request</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_settings">settings</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_unlock">unlock</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_unsubscribe">unsubscribe</a>

                            </li>
                    </ul>
                </div>

                <div class="index-section properties">
                    <h3>Properties</h3>

                    <ul class="index-list properties">
                            <li class="index-item property">
                                <a href="#property_TRIGGER_AFTER">TRIGGER_AFTER</a>

                                    <span class="flag static">static</span>
                            </li>
                            <li class="index-item property">
                                <a href="#property_TRIGGER_BEFORE">TRIGGER_BEFORE</a>

                                    <span class="flag static">static</span>
                            </li>
                    </ul>
                </div>


        </div>

            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

<div id="method_authenticate" class="method item">
    <h3 class="name"><code>authenticate</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Username</code>
                </li>
                <li class="arg">
                        <code>Password</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l603"><code>datasource.js:603</code></a>
        </p>



    </div>

    <div class="description">
        <p>Check user and password.
Exposes <a href="../classes/Database.html#method_authenticate" class="crosslink">authenticate</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Username</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">Password</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Promise</p>

            </div>
        </div>


</div>
<div id="method_deserializeUser" class="method item">
    <h3 class="name"><code>deserializeUser</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Username</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l615"><code>datasource.js:615</code></a>
        </p>



    </div>

    <div class="description">
        <p>Resolves to <a href="../classes/User.html" class="crosslink">User</a> for passport
management. Exposes
<a href="../classes/Database.html#method_deserializeUser" class="crosslink">deserializeUser</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Username</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_export" class="method item">
    <h3 class="name"><code>export</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Feather</code>
                </li>
                <li class="arg">
                        <code class="optional">[properties]</code>
                </li>
                <li class="arg">
                        <code>filter</code>
                </li>
                <li class="arg">
                        <code>dir</code>
                </li>
                <li class="arg">
                        <code>format</code>
                </li>
                <li class="arg">
                        <code>username</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l488"><code>datasource.js:488</code></a>
        </p>



    </div>

    <div class="description">
        <p>Export data.
Exposes <a href="../classes/Services.Exporter.html" class="crosslink">Services.Exporter</a> via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Feather</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[properties]</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">filter</code>
                        <span class="type">Filter</span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">dir</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Target directory</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">format</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p><code>json</code>, <code>ods</code> or <code>xlsx</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">username</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_getCatalog" class="method item">
    <h3 class="name"><code>getCatalog</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l156"><code>datasource.js:156</code></a>
        </p>



    </div>

    <div class="description">
        <p>Fetch feather catalog.</p>

    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_getPool" class="method item">
    <h3 class="name"><code>getPool</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l627"><code>datasource.js:627</code></a>
        </p>



    </div>

    <div class="description">
        <p>Return a configured postgres pool. Exposes
<a href="../classes/Database.html#method_getPool" class="crosslink">getPool</a>
via datasource.</p>

    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Promise</p>

            </div>
        </div>


</div>
<div id="method_getRoutes" class="method item">
    <h3 class="name"><code>getRoutes</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l203"><code>datasource.js:203</code></a>
        </p>



    </div>

    <div class="description">
        <p>Fetch array of all routes.</p>

    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_getServices" class="method item">
    <h3 class="name"><code>getServices</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l181"><code>datasource.js:181</code></a>
        </p>



    </div>

    <div class="description">
        <p>Fetch array of all services.</p>

    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_import" class="method item">
    <h3 class="name"><code>import</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>feather</code>
                </li>
                <li class="arg">
                        <code>format</code>
                </li>
                <li class="arg">
                        <code>filename</code>
                </li>
                <li class="arg">
                        <code>username</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l553"><code>datasource.js:553</code></a>
        </p>



    </div>

    <div class="description">
        <p>Import data.
Exposes <a href="../classes/Services.Importer.html" class="crosslink">Services.Importer</a> via
datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">feather</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">format</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p><code>json</code>, <code>ods</code> or <code>xlsx</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">filename</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">username</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_install" class="method item">
    <h3 class="name"><code>install</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Manifest</code>
                </li>
                <li class="arg">
                        <code>User</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l399"><code>datasource.js:399</code></a>
        </p>



    </div>

    <div class="description">
        <p>Install a module from a specified manifest file name.
Exposes <a href="../classes/Services.Installer.html#method_install" class="crosslink">install</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Manifest</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>filename.</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">User</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>name.</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Promise</p>

            </div>
        </div>


</div>
<div id="method_listen" class="method item">
    <h3 class="name"><code>listen</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>callback</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l225"><code>datasource.js:225</code></a>
        </p>



    </div>

    <div class="description">
        <p>Initialize listener. Message is passed to callback.
Exposes <a href="../classes/Services.Events.html#method_listen" class="crosslink">listen</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">callback</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_lock" class="method item">
    <h3 class="name"><code>lock</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>id</code>
                </li>
                <li class="arg">
                        <code>user</code>
                </li>
                <li class="arg">
                        <code>eventKey</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l307"><code>datasource.js:307</code></a>
        </p>



    </div>

    <div class="description">
        <p>Lock record. Resolves to <code>true</code> if successful.
Exposes <a href="../classes/Services.CRUD.html#method_lock" class="crosslink">lock</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">id</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Object id</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">user</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>User name</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">eventKey</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Browser instance event key</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_package" class="method item">
    <h3 class="name"><code>package</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>name</code>
                </li>
                <li class="arg">
                        <code>username</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l444"><code>datasource.js:444</code></a>
        </p>



    </div>

    <div class="description">
        <p>Package a module.
Exposes <a href="../classes/Services.Packager.html#method_package" class="crosslink">package</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">name</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Module name</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">username</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>User name</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_registeredFunctions" class="method item">
    <h3 class="name"><code>registeredFunctions</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l1728"><code>datasource.js:1728</code></a>
        </p>



    </div>

    <div class="description">
        
    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Object listing registered functions</p>

            </div>
        </div>


</div>
<div id="method_registerFunction" class="method item">
    <h3 class="name"><code>registerFunction</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>method</code>
                </li>
                <li class="arg">
                        <code>name</code>
                </li>
                <li class="arg">
                        <code>func</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>





        <span class="flag chainable">chainable</span>


    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l1421"><code>datasource.js:1421</code></a>
        </p>



    </div>

    <div class="description">
        <p>Register a function that can be called as a service by a
<a href="../classes/Datasource.html#method_request" class="crosslink">request</a>
so that data services can be made available to other data services
added via data service scripts. As a rule, all
functions must accept one <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a>
as an argument whose properties can be used as arguments within the
target function. The
<a href="../classes/Datasource.html#method_request" class="crosslink">request</a> will
automatically append its
<a href="../classes/Client.html" class="crosslink">Client</a>
to the object argument to use
for executing queries or other requests within the target function.</p>
<p>The function should return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a>
that resolves to the result of the function, if any.</p>
<p>Function names should be camel case which distinquishes them from
<a href="../modules/CRUD.html">CRUD</a> requests
where a capitalized feather name is used.</p>
<p>The following is list of functions that come pre-registered from hard
coded services:</p>
<ul>
<li><strong>GET</strong>
<ul>
<li><a href="../classes/Services.Currency.html#method_baseCurrency" class="crosslink">baseCurrency</a></li>
<li><a href="../classes/Services.Currency.html#method_convertCurrency" class="crosslink">convertCurrency</a></li>
<li><a href="../classes/Services.Tools.html#method_getAuthorizations" class="crosslink">getAuthorizations</a></li>
<li><a href="../classes/Services.Feathers.html#method_getFeather" class="crosslink">getFeather</a></li>
<li><a href="../classes/Services.Profile.html#method_getProfile" class="crosslink">getProfile</a></li>
<li><a href="../classes/Services.Routes.html#method_getRoutes" class="crosslink">getRoutes</a></li>
<li><a href="../classes/Services.Services.html#method_getServices" class="crosslink">getServices</a></li>
<li><a href="../classes/Services.Settings.html#method_getSettings" class="crosslink">getSettings</a></li>
<li><a href="../classes/Services.Settings.html#method_getSettingsRow" class="crosslink">getSettingsRow</a></li>
<li><a href="../classes/Services.Settings.html#method_getSettingsDefinition" class="crosslink">getSettingsDefinition</a></li>
<li><a href="../classes/Services.Workbooks.html#method_getWorkbook" class="crosslink">getWorkbook</a></li>
<li><a href="../classes/Services.Workbooks.html#method_getWorkbooks" class="crosslink">getWorkbooks</a></li>
<li><a href="../classes/Services.Feathers.html#method_isAuthorized" class="crosslink">isAuthorized</a></li>
<li><a href="../classes/Services.Tools.html#method_isSuperUser" class="crosslink">isSuperUser</a></li>
<li><a href="../classes/Services.Workbooks.html#method_workbookIsAuthorized" class="crosslink">workbookIsAuthorized</a></li>
</ul>
</li>
<li><strong>PUT</strong>
<ul>
<li><a href="../classes/Services.Feathers.html#method_saveAuthorization" class="crosslink">saveAuthorization</a></li>
<li><a href="../classes/Services.Feathers.html#method_saveFeather" class="crosslink">saveFeather</a></li>
<li><a href="../classes/Services.Profile.html#method_saveProfile" class="crosslink">saveProfile</a></li>
<li><a href="../classes/Services.Settings.html#method_saveSettings" class="crosslink">saveSettings</a></li>
<li><a href="../classes/Services.Workbooks.html#method_saveWorkbook" class="crosslink">saveWorkbook</a></li>
</ul>
</li>
<li><strong>POST</strong>
<ul>
<li><a href="../classes/Services.Role.html#method_changeRoleLogin" class="crosslink">changeRoleLogin</a></li>
<li><a href="../classes/Services.Role.html#method_changeRolePassword" class="crosslink">changeRolePassword</a></li>
<li><a href="../classes/Services.Role.html#method_createRole" class="crosslink">createRole</a></li>
<li><a href="../classes/Services.Role.html#method_dropRole" class="crosslink">dropRole</a></li>
<li><a href="../classes/Services.Role.html#method_grantMembership" class="crosslink">grantMembership</a></li>
<li><a href="../classes/Services.Role.html#method_revokeMembership" class="crosslink">revokeMembership</a></li>
<li><a href="../classes/Services.Feathers.html#method_saveAuthorization" class="crosslink">saveAuthorization</a></li>
<li><a href="../classes/Services.Events.html#method_subscribe" class="crosslink">subscribe</a></li>
<li><a href="../classes/Services.Events.html#method_unsubscribe" class="crosslink">unsubscribe</a></li>
</ul>
</li>
<li><strong>PATCH</strong>
<ul>
<li><a href="../classes/Services.Profile.html#method_patchProfile" class="crosslink">patchProfile</a></li>
</ul>
</li>
<li><strong>DELETE</strong>
<ul>
<li><a href="../classes/Services.Feathers.html#method_deleteFeather" class="crosslink">deleteFeather</a></li>
<li><a href="../classes/Services.Installer.html#method_deleteModule" class="crosslink">deleteModule</a></li>
<li><a href="../classes/Services.Workbooks.html#method_deleteWorkbook" class="crosslink">deleteWorkbook</a></li>
</ul>
</li>
</ul>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">method</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p><code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, or <code>DELETE</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">name</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Camel case function name</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">func</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Receiver</p>

            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>// Create a function that updates something specific
// (Assumed here to be executed within a data service script)
function fn (obj) { // Note the single object argument
    return new Promise(function (resolve, reject) {
        function callback() {
            resolve(true); // Success results in boolean
        }

        // &quot;f&quot; is the global variable available in scripts
        f.datasource.request({
            method: &quot;PATCH&quot;,
            name: &quot;Foo&quot;, // Capitalized name indicates CRUD request
            client: obj.client, // Client is automatically included
            id: obj.id, // Id is unique argument for this function
            data: [{
                op: &quot;replace&quot;,
                path: &quot;/status&quot;,
                value: &quot;Closed&quot;
            }]
        }).then(callback).catch(reject);
    });
}

// Register the function
f.datasource.registerFunction(&quot;POST&quot;, &quot;closeFoo&quot;, fn);

// Define a callback to use when calling our function
function callback (resp) {
    console.log(&quot;Response-&gt;&quot;, resp);
}

// Trap for errors
function error (err) {
    console.error(&quot;Erorr-&gt;&quot;, err);
}

// Execute a request that calls our function and sends a response
// via the callback
datasource.request({
    method: &quot;POST&quot;,
    name: &quot;closeFoo&quot;,
    data: {
        id: &quot;HTJ28n&quot;
    }
}).then(callback).catch(error);</code></pre>

            </div>
        </div>
</div>
<div id="method_registerFunction" class="method item">
    <h3 class="name"><code>registerFunction</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>method</code>
                </li>
                <li class="arg">
                        <code>name</code>
                </li>
                <li class="arg">
                        <code>func</code>
                </li>
                <li class="arg">
                        <code>trigger</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
        </span>





        <span class="flag chainable">chainable</span>


    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l1570"><code>datasource.js:1570</code></a>
        </p>



    </div>

    <div class="description">
        <p>When a trigger is included as an argument in <code>registerFunction</code>,
then the registered function is executed before or after a feather
<a href="../modules/CRUD.html">CRUD</a>
<a href="../classes/Datasource.html#method_request" class="crosslink">request</a>
according to the method and trigger type. The <code>method</code>
determines whether the function applies to a <code>POST</code>, <code>PATCH</code> or <code>DELETE</code>
<a href="../modules/CRUD.html">CRUD</a>
<a href="../classes/Datasource.html#method_request" class="crosslink">request</a>,
and the <code>trigger</code> determines whether the function is
executed before or after the
<a href="../modules/CRUD.html">CRUD</a>
request is processed. The function must take in one
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a> as its sole argument
and return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a>.</p>
<p>The following types of declarative business logic can be executed by
registered triggers:</p>
<ul>
<li>Validate values</li>
<li>Change values before processig (<code>before</code> trigger only)</li>
<li>Make data requests that create, update or delete other records.</li>
</ul>
<p>The design is meant to work similar to database triggers, except that
object inheritence is honored so triggers will also be inherited by
feather sub classes. Note this logic is declarative by definition, where
a change caused by one trigger can potentially cascade to many other
records which also have triggers.</p>
<p>The function called in a trigger will be passed an
object argument that includes the property <code>newRec</code> for <code>POST</code> and
<code>PATCH</code> requests that contains new record properties that will be
committed, and <code>oldRec</code> for <code>PATCH</code> and <code>DELETE</code> calls that contains
the property values of the record before the request was made.</p>
<p>To handle an invalid request, simply throw an error and
the entire originating request transaction will be rolled back.</p>
<pre class="code prettyprint"><code>let ds = f.datasource;

function (obj) {
    return new Promise(function (resolve) {
        if (newRec.lowest &gt;= newRec.highest) {
            throw new Error(
                "'Lowest' value must be less than 'highest'"
            );
        }

        resolve(); // Make sure to always resolve your promises!
    });
}

// Apply on <code>POST</code> record creation...
ds.registerFunction("POST", "Foo", fn, ds.TRIGGER_BEFORE);
</code></pre>
<p>If values on <code>newRec</code> are changed in a <code>before</code> trigger, those
values are what will be committed, which provides a way to intercept
and change values on proposed requests.</p>
<pre class="code prettyprint"><code>let ds = f.datasource;

function (obj) {
    return new Promise(function (resolve) {
        if (newRec.lowest &gt;= newRec.highest) {
            newRec.highest = newRec.lowest + 1;
        }

        resolve();
    });
}

// We can run this same logic on both <code>POST</code> and <code>PATCH</code>
ds.registerFunction("POST", "Foo", fn, ds.TRIGGER_BEFORE);
ds.registerFunction("PATCH", "Foo", fn, ds.TRIGGER_BEFORE);
</code></pre>
<p>If applicable, Properties can be compared between <code>oldRec</code> and <code>newRec</code>
to determine if changes have been proposed.</p>
<pre class="code prettyprint"><code>let ds = f.datasource;

function (obj) {
    return new Promise(function (resolve) {
        if (newRec.name !== oldRec.name) {
            throw new Error("Name cannot be changed");
        }

        resolve();
    });
}

// Note this one applies only to <code>PATCH</code> updates
ds.registerFunction("PATCH", "Foo", fn, ds.TRIGGER_BEFORE);
</code></pre>
<p>If other records will be changed as a consequence of a request, it is
a good practice to do this in an <code>after</code> trigger after all proposed
property changes, including default values, have already been
proceessed.</p>
<pre class="code prettyprint"><code>let ds = f.datasource;

function (obj) {
    return new Promise(function (resolve, reject) {
        let msg;

        // Create a log of some change. Note the updated
        // time and user aren't set until after the update
        // has been completed, so must use <code>after</code> trigger
        if (newRec.description !== oldRec.description) {
            msg = (
                "Description changed from '" +
                oldRec.description + "' to '" +
                newRec.description + "' by " +
                newRec.updatedBy + "."
            );
            fs.request({
                method: "POST",
                name: "FooLog",
                client: obj.client,
                data: {
                    message: msg,
                    logTime: newRec.updated
                }
            }).then(resolve).catch(reject);

            return;
        }

        resolve();
    });
}

// Note this one applies only to <code>PATCH</code> updates
ds.registerFunction("PATCH", "Foo", fn, ds.TRIGGER_AFTER);
</code></pre>
<p>Note any particular feather only supports one registered function per
method and trigger type.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">method</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p><code>POST</code>, <code>PATCH</code>, or <code>DELETE</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">name</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Upper case feather name</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">func</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">trigger</code>
                        <span class="type">Integer</span>


                    <div class="param-description">
                        <p><a href="../classes/Datasource.html#property_TRIGGER_BEFORE" class="crosslink">TRIGGER_BEFORE</a> or
<a href="../classes/Datasource.html#property_TRIGGER_AFTER" class="crosslink">TRIGGER_AFTER</a></p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>:
                    <p>Receiver</p>

            </div>
        </div>


</div>
<div id="method_request" class="method item">
    <h3 class="name"><code>request</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Payload</code>
                </li>
                <li class="arg">
                        <code>payload.name</code>
                </li>
                <li class="arg">
                        <code>payload.method</code>
                </li>
                <li class="arg">
                        <code class="optional">[payload.id]</code>
                </li>
                <li class="arg">
                        <code class="optional">[payload.data]</code>
                </li>
                <li class="arg">
                        <code class="optional">[payload.filter]</code>
                </li>
                <li class="arg">
                        <code class="optional">[payload.client]</code>
                </li>
                <li class="arg">
                        <code class="optional">[isSuperUser]</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l648"><code>datasource.js:648</code></a>
        </p>



    </div>

    <div class="description">
        <p>This function is the gateway for all
<a href="../modules/CRUD.html">CRUD</a> requests and data
service function calls. <a href="../classes/Datasource.html" class="crosslink">Datasource</a> is
attached to the <code>f</code> global variable in scripts to expose this
capability.</p>
<h3>CRUD Methods</h3>
<p>These requests include the capitalized feather as the <code>name</code> argument.
The following methods are supported:</p>
<h4>POST (Create)</h4>
<p>Use this method to insert new records. Any properties not included
will be populated by default values. The
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a> will resolve to a <code>PATCH</code> array
describing all changes made on the server side due to feather defaults
and changes caused by triggers. This <code>PATCH</code> can be applied by the
originating requestor to ensure its own copy of the record exactly
matches the server.The <code>id</code> will be checked for uniqueness, along with
any properties on the feather set for <code>isUnique</code> equals <code>true</code>.</p>
<pre class="code prettyprint"><code>let ds = f.datasource;

function callback (resp) {
    console.log("PATCH-&gt;", resp);
}

function error (err) {
    console.error("ERROR-&gt;", err);
}

ds.request({
    method: "POST",
    name: "Contact",
    data: {
        id: "m7akxiwvz22a",
        firstName: "Caleb",
        lastName: "Johnstone"
    }
}).then(callback).catch(error);
</code></pre>
<p>If the code above is run twice an error will be thrown because of
a unique id violation, however, if the record id is included
in a <code>POST</code> request, the request will be treated as an "Upsert" call,
which is to say if a record with that id is not found it will be
inserted, if one is found the values included in the data will be
updated on the existing record. Post requests that include <code>id</code>
are therefore idempotent.</p>
<pre class="code prettyprint"><code>...

ds.request({
    method: "POST",
    name: "Contact",
    id: "m7akxiwvz22a", // Indicate upsert behavior
    data: {
        firstName: "Caleb",
        lastName: "Johnstone"
    }
}).then(callback).catch(error);
</code></pre>
<h4>GET (Read)</h4>
<p>Use <code>GET</code> to retreive one or more records.</p>
<p>Retreive one result by refering to the record id</p>
<pre class="code prettyprint"><code>...

f.datasource.request({
    method: "GET",
    name: "Contact",
    id: "m7akxiwvz22a"
}).then(callback).catch(error);
</code></pre>
<p>Excluding the <code>id</code> will return all records</p>
<pre class="code prettyprint"><code>...

f.datasource.request({
    method: "GET",
    name: "Contact"
}).then(callback).catch(error);
</code></pre>
<p>Requests can be paginated so records are returned in small groups
using the Filter property.</p>
<pre class="code prettyprint"><code>...

f.datasource.request({
    method: "GET",
    name: "Contact",
    filter: {
        offset: 20, // Start page
        limit: 10   // Page length
    }
}).then(callback).catch(error);
</code></pre>
<p>Of course filters can also logically limit and sort</p>
<pre class="code prettyprint"><code>...

f.datasource.request({
    method: "GET",
    name: "Contact",
    filter: {
        criteria: [{
            property: "lastName",
            operation: "equals",
            criteria: "Doe"
        }],
        sort: [{
            property: "firstName",
            order: "ASC"
        }]
    }
}).then(callback).catch(error);
</code></pre>
<h4>PATCH (Update)</h4>
<p>Update records using <code>PATCH</code> where the <code>data</code> argument follows the
<a href='https://tools.ietf.org/html/rfc6902'>rfc 6092</a>
specification for JSON patch updates. As with <code>POST</code>, any property
values that are updated as a side effect or wind up with different
values than requested will be returned in a patch containing all
the differences.</p>
<pre class="code prettyprint"><code>...

ds.request({
    method: "PATCH",
    name: "Contact",
    id: "m7akxiwvz22a", // Which record to patch
    data: [{
        op: "replace",
        path: "/firstName",
        value: "Joshua"
    }]
}).then(callback).catch(error);
</code></pre>
<h4>DELETE</h4>
<p>Delete a record simply by referencing the <code>id</code>.</p>
<pre class="code prettyprint"><code>...

ds.request({
    method: "DELETE",
    name: "Contact",
    id: "m7akxiwvz22a"
}).then(callback).catch(error);
</code></pre>
<h3>Calling Registered Functions</h3>
<p>Requests can also call registered functions to run procedural logic.
They are differentiated from CRUD requests by use of a camel case
name argument. See
<a href="../classes/Datasource.html#method_registerFunction" class="crosslink">registerFunction</a>
for more information.</p>
<pre class="code prettyprint"><code>// Requesting currency conversion
...

ds.request({
    method: "POST",
    name: "convertCurrency",
    data: {
        fromCurrency: "EUR",
        amount: "100"
    }
}).then(callback).catch(error);</code></pre>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Payload</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">payload.name</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Name of feather or registered function</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">payload.method</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                        <p>Method to perform: <code>GET</code>, <code>POST</code>,
<code>PUT</code>, <code>PATCH</code> or <code>DELETE</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[payload.id]</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Identifier for <code>GET</code>, <code>PATCH</code> and <code>DELETE</code></p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[payload.data]</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Required for <code>POST</code> and <code>PATCH</code>
calls</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[payload.filter]</code>
                        <span class="type">Filter</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Filter for <code>GET</code> requests</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[payload.client]</code>
                        <span class="type"><a href="../classes/Client.html" class="crosslink">Client</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Database client. If undefined one
will be intialized by default and wrapped in a transaction if necessary.</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[isSuperUser]</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Bypass authorization checks.
Default false.</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_settings" class="method item">
    <h3 class="name"><code>settings</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type">Settings</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l1743"><code>datasource.js:1743</code></a>
        </p>



    </div>

    <div class="description">
        
    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Settings</span>:
                    <p>Internal settings object maintained by service</p>

            </div>
        </div>


</div>
<div id="method_unlock" class="method item">
    <h3 class="name"><code>unlock</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>Criteria</code>
                </li>
                <li class="arg">
                        <code class="optional">[criteria.id]</code>
                </li>
                <li class="arg">
                        <code class="optional">[criteria.username]</code>
                </li>
                <li class="arg">
                        <code class="optional">[criteria.eventKey]</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l354"><code>datasource.js:354</code></a>
        </p>



    </div>

    <div class="description">
        <p>Unlock one or more records.
Exposes <a href="../classes/Services.CRUD.html#method_unlock" class="crosslink">unlock</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">Criteria</code>
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>


                    <div class="param-description">
                        <p>for what to unlock (at least one)</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[criteria.id]</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Object id</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[criteria.username]</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>User name</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name optional">[criteria.eventKey]</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>Event key</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
<div id="method_unsubscribe" class="method item">
    <h3 class="name"><code>unsubscribe</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>id</code>
                </li>
                <li class="arg">
                        <code>type</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l262"><code>datasource.js:262</code></a>
        </p>



    </div>

    <div class="description">
        <p>Unsubcribe from object or by type.
Exposes
<a href="../classes/Services.Events.html#method_unsubscribe" class="crosslink">unsubscribe</a>
via datasource.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">id</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">type</code>
                        <span class="type"><a href="../classes/String.html" class="crosslink">String</a></span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="crosslink external" target="_blank">Promise</a></span>:
            </div>
        </div>


</div>
            </div>

            <div id="properties" class="api-class-tabpanel">
                <h2 class="off-left">Properties</h2>

<div id="property_TRIGGER_AFTER" class="property item">
    <h3 class="name"><code>TRIGGER_AFTER</code></h3>
    <span class="type">Integer</span>



        <span class="flag final">final</span>

        <span class="flag static">static</span>

    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l147"><code>datasource.js:147</code></a>
        </p>


    </div>

    <div class="description">
        
    </div>

        <p><strong>Default:</strong> 2</p>


</div>
<div id="property_TRIGGER_BEFORE" class="property item">
    <h3 class="name"><code>TRIGGER_BEFORE</code></h3>
    <span class="type">Integer</span>



        <span class="flag final">final</span>

        <span class="flag static">static</span>

    <div class="meta">
                <p>
                Defined in
        <a href="../files/datasource.js.html#l138"><code>datasource.js:138</code></a>
        </p>


    </div>

    <div class="description">
        
    </div>

        <p><strong>Default:</strong> 1</p>


</div>
            </div>


    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
